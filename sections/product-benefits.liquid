{% comment %}
Product Detail Page (PDP) Benefits Section
- Dynamically pulls benefits based on the product
- Allows admin to edit/add benefits
- Uses an accordion-style UI
{% endcomment %}

{% schema %}
{
  "name": "Product Benefits",
  "settings": [],
  "blocks": [
    {
      "type": "benefit",
      "name": "Benefit",
      "settings": [
        {
          "type": "text",
          "id": "benefit_title",
          "label": "Benefit Title"
        },
        {
          "type": "textarea",
          "id": "benefit_description",
          "label": "Benefit Description"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Product Benefits",
      "blocks": [
        { "type": "benefit", "settings": { "benefit_title": "Example", "benefit_description": "Example description" } }
      ]
    }
  ]
}
{% endschema %}

{% comment %}
Navigation Menu - Shop, Ingredients, Learn
{% endcomment %}
{% section 'header' %}

<div class="product-page container">
  <div class="product-gallery">
    {% for image in product.images %}
      <img src="{{ image.src | img_url: 'large' }}" alt="{{ image.alt }}" />
    {% endfor %}
  </div>

  <div class="product-info">
    <h1>{{ product.title }}</h1>
    <p>{{ product.description }}</p>
    <p class="price">{{ product.price | money }}</p>
    
    <form method="post" action="/cart/add">
      <input type="hidden" name="id" value="{{ product.variants.first.id }}" />
      <button type="submit">Add to Cart</button>
    </form>
  </div>
</div>

<div class="product-benefits container">
  <h2>Benefits of {{ product.title }}</h2>
  <div class="accordion">
    {% for block in section.blocks %}
      <div class="accordion-item">
        <button class="accordion-header">{{ block.settings.benefit_title }}</button>
        <div class="accordion-content">
          <p>{{ block.settings.benefit_description }}</p>
        </div>
      </div>
    {% endfor %}
  </div>
</div>

{% if section.settings.enable_sticky_add_to_cart %}
  <div class="sticky-add-to-cart">
    <button>Add to Cart</button>
  </div>
{% endif %}

<style>
  .accordion-item {
    border-bottom: 1px solid #ddd;
  }
  .accordion-header {
    background: none;
    border: none;
    width: 100%;
    text-align: left;
    font-size: 18px;
    font-weight: bold;
    cursor: pointer;
    padding: 10px;
  }
  .accordion-content {
    display: none;
    padding: 10px;
  }
  .accordion-header.active + .accordion-content {
    display: block;
  }
</style>

<script>
  document.querySelectorAll('.accordion-header').forEach(button => {
    button.addEventListener('click', () => {
      button.classList.toggle('active');
      let content = button.nextElementSibling;
      content.style.display = content.style.display === 'block' ? 'none' : 'block';
    });
  });
</script>
